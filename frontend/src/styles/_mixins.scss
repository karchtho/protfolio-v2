/**
 * SCSS Mixins Library
 * Reusable style patterns for components
 */

@use 'sass:math';
@use './variables' as *;

/* ==========================================================================
   LAYOUT MIXINS
   ========================================================================== */

/**
 * Card Container
 * Standard card styling with theme-aware colors
 */
@mixin card {
  background: var(--surface);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-default);
  padding: var(--spacing-6);
  box-shadow: var(--shadow-sm);

  // Optional: add hover effect
  transition: box-shadow var(--transition-base) var(--ease-in-out);

  &:hover {
    box-shadow: var(--shadow-md);
  }
}

/**
 * Container with max-width
 * Centered container with responsive padding
 */
@mixin container($max-width: var(--container-xl)) {
  max-width: $max-width;
  margin-inline: auto;
  padding-inline: var(--spacing-4);

  @media (min-width: $breakpoint-tablet) {
    padding-inline: var(--spacing-8);
  }
}

/* ==========================================================================
   TYPOGRAPHY MIXINS
   ========================================================================== */

/**
 * Text Truncation
 * Single-line ellipsis
 */
@mixin truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/**
 * Multi-line Truncation
 * Clamp text to N lines with ellipsis
 */
@mixin line-clamp($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/**
 * Heading Base
 * Common heading styles
 */
@mixin heading {
  font-family: 'Poppins', sans-serif;
  font-weight: var(--font-weight-bold);
  line-height: var(--line-height-tight);
  color: var(--text-primary);
  margin: 0; // Reset default margins
}

/**
 * Body Text Base
 */
@mixin body-text {
  font-family: 'Source Sans 3', sans-serif;
  font-weight: var(--font-weight-normal);
  line-height: var(--line-height-relaxed);
  color: var(--text-secondary);
}

/**
 * Code/Monospace Text
 */
@mixin code-text {
  font-family: 'Fira Code', monospace;
  font-size: var(--font-size-sm);
  line-height: var(--line-height-normal);
}

/* ==========================================================================
     INTERACTION MIXINS==========================================================================*/

/**
   * Focus Ring (Accessible)
   * Standard focus indicator for interactive elements
   */
@mixin focus-ring {
  outline: none;
  box-shadow: var(--focus-ring);

  // For light backgrounds
  &:focus-visible {
    box-shadow: var(--focus-ring);
  }

  // For dark backgrounds (if needed)
  &.on-dark:focus-visible {
    box-shadow: 0 0 0 3px var(--background),
      0 0 0 5px var(--primary);
  }
}

/**
 * Hover Lift Effect
 * Subtle translateY on hover
 */
@mixin hover-lift($distance: -2px) {
  transition: transform var(--transition-fast) var(--ease-out);

  &:hover {
    transform: translateY($distance);
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;

    &:hover {
      transform: none;
    }
  }
}

/**
 * Interactive Element Base
 * Common styles for buttons, links, etc.
 */
@mixin interactive {
  cursor: pointer;
  user-select: none;
  -webkit-tap-highlight-color: transparent;

  // Focus
  &:focus-visible {
    @include focus-ring;
  }

  // Disabled
  &:disabled,
  &[aria-disabled="true"] {
    cursor: not-allowed;
    opacity: 0.5;
  }
}

/* ==========================================================================
   VISUAL MIXINS
   ========================================================================== */

/**
 * Glassmorphism Effect
 * Frosted glass background
 */
@mixin glass($blur: 10px, $opacity: 0.8) {
  background: oklch(from var(--surface) l c h / $opacity);
  backdrop-filter: blur($blur);
  -webkit-backdrop-filter: blur($blur);
}

/**
 * Smooth Scroll
 */
@mixin smooth-scroll {
  scroll-behavior: smooth;

  @media (prefers-reduced-motion: reduce) {
    scroll-behavior: auto;
  }
}

/**
 * Hide Visually (Accessible)
 * Hide element but keep it in the DOM for screen readers
 */
@mixin visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ==========================================================================
   RESPONSIVE MIXINS
   ========================================================================== */

/**
 * Responsive Typography
 * Fluid font size between min and max
 */
@mixin fluid-type($min-size, $max-size, $min-vw: 375px, $max-vw: 1200px) {
  font-size: clamp($min-size,
      calc($min-size + ($max-size - $min-size) * ((100vw - $min-vw) / ($max-vw - $min-vw))),
      $max-size );
}

/**
 * Media Query Helpers
 */
@mixin mobile-only {
  @media (max-width: calc($breakpoint-mobile - 1px)) {
    @content;
  }
}

@mixin tablet-up {
  @media (min-width: $breakpoint-tablet) {
    @content;
  }
}

@mixin desktop-up {
  @media (min-width: calc($breakpoint-tablet + 1px)) {
    @content;
  }
}

/* ==========================================================================
   ANIMATION MIXINS
   ========================================================================== */

/**
 * Fade In Animation
 */
@mixin fade-in($duration: var(--transition-base)) {
  animation: fadeIn $duration var(--ease-in-out);

  @media (prefers-reduced-motion: reduce) {
    animation: none;
    opacity: 1;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

/**
 * Slide Up Animation
 */
@mixin slide-up($distance: 20px, $duration: var(--transition-base)) {
  animation: slideUp $duration var(--ease-out);

  @media (prefers-reduced-motion: reduce) {
    animation: none;
    transform: none;
  }
}
// TODO: check $distance variable. Hardcoded 20px for now
@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/**
 * Shimmer Effect (Loading Skeleton)
 */
@mixin shimmer {
  background: linear-gradient(90deg,
      transparent,
      oklch(from var(--text-tertiary) l c h / 0.1),
      transparent);
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;

  @media (prefers-reduced-motion: reduce) {
    animation: none;
    background: oklch(from var(--text-tertiary) l c h / 0.05);
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }

  100% {
    background-position: 200% 0;
  }
}
